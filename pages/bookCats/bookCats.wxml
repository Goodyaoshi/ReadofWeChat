<view class="bookCats"><view class="type_wrap"><view class="type"><block wx:for="{{typeList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['type-item '+(currentType===item.id?'active':'')]}}" data-typeid="{{item.id}}" data-event-opts="{{[['tap',[['switchType',['$event']]]]]}}" bindtap="__e">{{''+item.name+''}}</view></block></view><block wx:if="{{showMinor}}"><scroll-view class="minor" scroll-x="{{true}}"><block wx:for="{{minorList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['minor-item '+(currentMinor===item?'active':'')]}}" data-typeid="{{item}}" data-event-opts="{{[['tap',[['switchMinor',['$event']]]]]}}" bindtap="__e">{{''+item+''}}</view></block></scroll-view></block></view><scroll-view class="bookList" style="{{('height:'+winHeight+'rpx;top:'+bookListTop+'rpx')}}" enable-back-to-top="{{true}}" lower-threshold="100" scroll-top="{{scrollTop}}" scroll-y="true" data-event-opts="{{[['scrolltolower',[['loadMoreFun',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{books.books}}" wx:for-item="book" wx:for-index="index" wx:key="index"><navigator class="book_item" hover-class="none" url="{{'/pages/details/details?book_title='+book.title+'&book_author='+book.author+'&book_src='+(STATIC_HOST+book.cover)+'&book_desc='+book.shortIntro}}"><image src="{{STATIC_HOST+book.cover}}" lazy-load="true"></image><view class="book_info"><text class="book_title">{{book.title}}</text><text class="book_site">{{book.author}}</text><view class="book_desc">{{book.shortIntro}}</view><block wx:for="{{[0,1,2]}}" wx:for-item="tag" wx:for-index="index2" wx:key="index2"><view class="book_tag"><block wx:if="{{book.tags[tag]}}"><view class="book_tag_item" style="{{('background:'+tagColors[tag])}}">{{book.tags[tag]}}</view></block></view></block></view></navigator></block><block wx:if="{{loadedAll}}"><view class="loadedAll">已加载全部</view></block></scroll-view></view>